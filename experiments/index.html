<!doctype html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Experiments | Parth Sharma</title>
  <meta name="description" content="Welcome to Parth Sharma's personal website.">
  <meta name="keywords" content="Parth, designer, website, Sharma, Parth Sharma, developer, programmer, writer, photographer, blog, parth sharma website, parthsharma151">
  <meta name="author" content="Parth Sharma">

  <meta property="og:url" content="http://parthsharma.co">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Parth Sharma">
  <meta property="og:image" content="http://shiz.co/meta/shiz-s2.png">
  <meta property="og:description" content="Welcome to Parth Sharma's personal website.">
  <meta property="og:site_name" content="parthsharma.co – Parth Sharma">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@parthsharma151">
  <meta name="twitter:title" content="Parth Sharma">
  <meta name="twitter:description" content="Welcome to Parth Sharma's personal website.">
  <meta name="twitter:image" content="http://shiz.co/meta/shiz-s2.png">

  <meta itemprop="name" content="Parth Sharma">
  <meta itemprop="description" content="Welcome to Parth Sharma's personal website.">
  <meta itemprop="image" content="http://shiz.co/meta/shiz-s2.png">

  <link rel="icon" href="../assets/imgs/plo.png">
    <link rel="stylesheet" href="../css/main.css">
    <style>
        /** {
  padding: 0;
  margin: 0;
}
html {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;

}
*,
*:before,
*:after {
  -webkit-box-sizing: inherit;
  -moz-box-sizing: inherit;
  box-sizing: inherit;
}
:focus {
  outline: none;
}*/
        body {
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased!important;
            -moz-osx-font-smoothing: grayscale;
        }

        /*CANVAS TIME*/
        canvas {
            position: fixed;
            /*top: 0;*/
            /*left: 0;*/
            overflow-x: hidden;
            /*top: 0;*/
            /*left: 0;*/
            z-index: -1;
        }
    </style>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }
            ,
            i[r].l = 1 * new Date();
            a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        }
        )(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-70450795-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body>
    <div class="animsition-overlay" data-animsition-overlay="true">
        <div class="my-wrapper t-scroll o-scroll bg-t int-scroll">
            <div id="menu-white">
                <div id="h1-white">
                    <a class="c-white animsition-link" href="./../">Parth Sharma</a>
                </div>
                <ul>
                    <li>
                        <a class="c-white active-link-white animsition-link" href="#">Experiments</a>
                    </li>
                    <li>
                        <a class="c-white animsition-link" href="./../about/">About</a>
                    </li>
                </ul>
            </div>
            <div id="my-canvas"></div>
            <div class="experiments-wrapper">
                <div class="exp-container">
                    <div class="exp-feat">
                        <div class="small-left-exp exp-hero">
                            <div class="exp-txt">
                                <h2>Photography</h2>
                                <p>Starting with a simple point-and–shoot, I used to spend my vacations capturing everything that I could see around me. After a lot of trial and error with my dad’s DSLR, I learned various technical skills that are quintessential to any photographer. Since then, I've only gained more exposure and today, I try to document each moment of my life.</p>
                            </div>
                        </div>
                        <div class="big-right-exp">
                            <img class="" src="../assets/imgs/exp/exp-p00.png">
                            <img class="post" src="../assets/imgs/exp/exp-p01.png">
                            <!--<img class="post" src="../assets/imgs/exp/exp-p02.png">-->
                            <img class="post" src="../assets/imgs/exp/exp-p03.png">
                            <img class="post" src="../assets/imgs/exp/exp-p04.png">
                        </div>
                        <a class="post-txt link-launch-exp" href="#" target="_blank">See it live</a>
                    </div>
                    <div class="exp-feat">
                        <div class="small-left-exp post-txt">
                            <h2>Writing</h2>
                            <p>To be honest, I can't think of a time when I wasn't writing. Growing up, I spent most of my free time in a sunlit balcony, losing myself and finding myself in the depths of a book. I've come a long way since then, creating fictional worlds of my own. You can check out and read some of my short stories here.</p>
                        </div>
                        <div class="big-right-exp margin-content">
                            <img class="post" src="../assets/imgs/exp/exp-igorrr-f.png">
                            <img class="post" src="../assets/imgs/exp/exp-igorrr.png">
                            <iframe id="vid-clubbed" src="https://player.vimeo.com/video/202561896?color=ffffff&title=0&byline=0&portrait=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen class="post vimeo-size"></iframe>
                        </div>
                        <a class="post-txt link-launch-exp" href="#" target="_blank">See it live</a>
                    </div>
                    <!---
                    <div class="exp-feat">
                        <div class="small-left-exp post-txt">
                            <h2>Clubbed to Death</h2>
                            <p>I love the Matrix movie and Clubbed to Death is probably one of the best soundtrack ever, which means I had to do some audio viz with it. Made with Processing, a mix of the music's frequency and random events changes the visual.</p>
                        </div>
                        <div class="big-right-exp margin-content">
                            <iframe id="vid-clubbed" src="https://player.vimeo.com/video/139378240?color=ffffff&title=0&byline=0&portrait=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen class="post vimeo-size"></iframe>
                        </div>
                    </div>
                    <div class="exp-feat">
                        <div class="small-left-exp post-txt">
                            <h2>10 print</h2>
                            <p>
                                10 print is a BASIC program for the Commodore 64 that despite being made by only one line of code <span class="code-10">(10 PRINT CHR$(205.5+RND(1)); : GOTO 10)</span>
                                generates a complex maze due to its random aspect. I discovered this algorithm in my research on generative design, which led me to the fascinating book <a href="https://10print.org/" target="_blank">10 PRINT</a>
                                .
                            </p>
                            <p>I became very interested about the simplicity (and primitiveness) of the code and decided to recreate it while studying Processing. Later, I had fun adding a song and even a potentiometer (via Arduino) as influencing variables of this little experiment.</p>
                        </div>
                        <div class="big-right-exp margin-content">
                            <img class="post" src="../assets/imgs/exp/exp-10p.gif">
                            <iframe src="https://player.vimeo.com/video/129457872?color=ffffff&title=0&byline=0&portrait=0" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen class="post vimeo-size"></iframe>
                        </div>
                    </div>
                    <div class="exp-feat">
                        <div class="small-left-exp post-txt">
                            <h2>8 AudioViz</h2>
                            <p>A small project in which you can drag and drop an audio file and listen to it while seeing an – literally – infinite animation. Unfortunately, no one listens to mp3 anymore since streaming music is so amazing. I should do a new version using SoundCloud’s API.</p>
                        </div>
                        <div class="big-right-exp margin-content">
                            <img class="post" src="../assets/imgs/exp/exp-8av.png">
                        </div>
                        <a class="post-txt link-launch-exp" href="http://shiz.co/8audioviz" target="_blank">See it live</a>
                    </div>
                    <div class="exp-feat exp-last">
                        <div class="small-left-exp post-txt">
                            <h2>Awesome Audio &nbspViz</h2>
                            <p>
                                If you have come this far you should have realized that I really like music visualization. Based on this, a friend invited me to collaborate with a list of amazing links and materials about audio viz on <a href="https://github.com/willianjusten/awesome-audio-visualization" target="_blank">GitHub</a>
                                . I took the opportunity to create a small generative logo to illustrate it.
                            </p>
                        </div>
                        <div class="big-right-exp margin-content">
                            <img class="post" src="../assets/imgs/exp/exp-aav.png">
                        </div>
                        <a class="post-txt link-launch-exp" href="http://shiz.co/aav" target="_blank">See it live</a>
                    </div>
                    ---->
                    <div class="exp-space"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js"></script>
    <script src="../vendors/Detector.js"></script>
    <script src="../vendors/SimplexNoise.js"></script>
    <script src="../vendors/GPUComputationRenderer.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="../js/main.js"></script>
    <script id="heightmapFragmentShader" type="x-shader/x-fragment">
        #include <common>

			uniform vec2 mousePos;
			uniform float mouseSize;
			uniform float viscosityConstant;

			#define deltaTime ( 1.0 / 60.0 )
			#define GRAVITY_CONSTANT ( resolution.x * deltaTime * 3.0 )

			void main()	{

				vec2 cellSize = 1.0 / resolution.xy;

				vec2 uv = gl_FragCoord.xy * cellSize;

				// heightmapValue.x == height
				// heightmapValue.y == velocity
				// heightmapValue.z, heightmapValue.w not used
				vec4 heightmapValue = texture2D( heightmap, uv );

				// Get neighbours
				vec4 north = texture2D( heightmap, uv + vec2( 0.0, cellSize.y ) );
				vec4 south = texture2D( heightmap, uv + vec2( 0.0, - cellSize.y ) );
				vec4 east = texture2D( heightmap, uv + vec2( cellSize.x, 0.0 ) );
				vec4 west = texture2D( heightmap, uv + vec2( - cellSize.x, 0.0 ) );

				float sump = north.x + south.x + east.x + west.x - 4.0 * heightmapValue.x;

				float accel = sump * GRAVITY_CONSTANT;

				// Dynamics
				heightmapValue.y += accel;
				heightmapValue.x += heightmapValue.y * deltaTime;

				// Viscosity
				heightmapValue.x += sump * viscosityConstant;

				// Mouse influence
				float mousePhase = clamp( length( ( uv - vec2( 0.5 ) ) * BOUNDS - vec2( mousePos.x, - mousePos.y ) ) * PI / mouseSize, 0.0, PI );
				heightmapValue.x += cos( mousePhase ) + 1.0;

				gl_FragColor = heightmapValue;

			}
    </script>
    <script id="smoothFragmentShader" type="x-shader/x-fragment">
        uniform sampler2D texture;

			void main()	{

				vec2 cellSize = 1.0 / resolution.xy;

				vec2 uv = gl_FragCoord.xy * cellSize;

				// Computes the mean of texel and 4 neighbours
				vec4 textureValue = texture2D( texture, uv );
				textureValue += texture2D( texture, uv + vec2( 0.0, cellSize.y ) );
				textureValue += texture2D( texture, uv + vec2( 0.0, - cellSize.y ) );
				textureValue += texture2D( texture, uv + vec2( cellSize.x, 0.0 ) );
				textureValue += texture2D( texture, uv + vec2( - cellSize.x, 0.0 ) );

				textureValue /= 5.0;

				gl_FragColor = textureValue;

			}
    </script>
    <script id="waterVertexShader" type="x-shader/x-vertex">
        uniform sampler2D heightmap;

			#define PHONG

			varying vec3 vViewPosition;

			#ifndef FLAT_SHADED

				varying vec3 vNormal;

			#endif

			#include <common>
			#include <uv_pars_vertex>
			#include <uv2_pars_vertex>
			#include <displacementmap_pars_vertex>
			#include <envmap_pars_vertex>
			#include <color_pars_vertex>
			#include <morphtarget_pars_vertex>
			#include <skinning_pars_vertex>
			#include <shadowmap_pars_vertex>
			#include <logdepthbuf_pars_vertex>
			#include <clipping_planes_pars_vertex>

			void main() {

				vec2 cellSize = vec2( 1.0 / WIDTH, 1.0 / WIDTH );

				#include <uv_vertex>
				#include <uv2_vertex>
				#include <color_vertex>

				// # include <beginnormal_vertex>
				// Compute normal from heightmap
				vec3 objectNormal = vec3(
					( texture2D( heightmap, uv + vec2( - cellSize.x, 0 ) ).x - texture2D( heightmap, uv + vec2( cellSize.x, 0 ) ).x ) * WIDTH / BOUNDS,
					( texture2D( heightmap, uv + vec2( 0, - cellSize.y ) ).x - texture2D( heightmap, uv + vec2( 0, cellSize.y ) ).x ) * WIDTH / BOUNDS,
					1.0 );
				//<beginnormal_vertex>

				#include <morphnormal_vertex>
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#include <defaultnormal_vertex>

			#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED

				vNormal = normalize( transformedNormal );

			#endif

				//# include <begin_vertex>
				float heightValue = texture2D( heightmap, uv ).x;
				vec3 transformed = vec3( position.x, position.y, heightValue );
				//<begin_vertex>

				#include <displacementmap_vertex>
				#include <morphtarget_vertex>
				#include <skinning_vertex>
				#include <project_vertex>
				#include <logdepthbuf_vertex>
				#include <clipping_planes_vertex>

				vViewPosition = - mvPosition.xyz;

				#include <worldpos_vertex>
				#include <envmap_vertex>
				#include <shadowmap_vertex>

			}
    </script>
    <script>
        if (!Detector.webgl)
            Detector.addGetWebGLMessage();

        var hash = document.location.hash.substr(1);
        if (hash)
            hash = parseInt(hash, 0);

        // Texture width for simulation
        var WIDTH = 128;
        //var WIDTH = hash || 128;
        var NUM_TEXELS = WIDTH * WIDTH;

        // Width and height of window
        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;

        // Water size in system units
        // var BOUNDS = 512 * 1.8;
        var BOUNDS = 512 * 1.8;
        // var BOUNDS_HALF = BOUNDS * 0.5;

        var container, stats;
        var camera, scene, renderer, controls;
        var mouseMoved = false;
        var mouseCoords = new THREE.Vector2();
        var raycaster = new THREE.Raycaster();

        var waterMesh;
        var meshRay;
        var gpuCompute;
        var heightmapVariable;
        var waterUniforms;
        var smoothShader;

        var simplex = new SimplexNoise();

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        // document.getElementById( 'waterSize' ).innerText = WIDTH + ' x ' + WIDTH;

        function change(n) {
            location.hash = n;
            location.reload();
            return false;
        }

        // var options = '';
        // for ( var i = 4; i < 10; i++ ) {
        // 	var j = Math.pow( 2, i );
        // 	options += '<a href="#" onclick="return change(' + j + ')">' + j + 'x' + j + '</a> ';
        // }
        // document.getElementById('options').innerHTML = options;

        init();
        animate();

        function init() {

            var myCanvas = document.getElementById('my-canvas');

            container = document.createElement('div');
            myCanvas.appendChild(container);

            camera = new THREE.PerspectiveCamera(75,window.innerWidth / window.innerHeight,1,3000);
            camera.position.set(0, 250, 0);
            //-1.6191460994604308 // 250
            camera.rotation.set(-1.591, 0, 0);
            //( -1.6191460994604308, 0, 0 );

            scene = new THREE.Scene();

            // var sun = new THREE.DirectionalLight( 0xFFFFFF, 1.0 );
            // sun.position.set( 300, 400, 175 );
            // scene.add( sun );

            // var sun2 = new THREE.DirectionalLight( 0xFFFFFF, 0.6 ); //( 0x40A040, 0.6 );
            // sun2.position.set( -100, 350, -200 );
            // scene.add( sun2 );

            var sun = new THREE.DirectionalLight(0xFFFFFF,.6);
            // 1 // last was .7
            sun.position.set(300, 400, 775);
            //z 475
            scene.add(sun);

            var sun2 = new THREE.DirectionalLight(0xFFFFFF,.6);
            //( 0x40A040, 0.6 );
            sun2.position.set(-100, 350, -400);
            //z -200
            scene.add(sun2);

            renderer = new THREE.WebGLRenderer();
            renderer.setClearColor(0x000000);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // controls = new THREE.OrbitControls( camera, renderer.domElement );

            // stats = new Stats();
            // container.appendChild( stats.dom );

            document.addEventListener('mousemove', onDocumentMouseMove, false);
            document.addEventListener('touchstart', onDocumentTouchStart, false);
            document.addEventListener('touchmove', onDocumentTouchMove, false);

            // document.addEventListener( 'keydown', function( event ) {

            // 	// W Pressed: Toggle wireframe
            // 	if ( event.keyCode === 87 ) {

            // 		waterMesh.material.wireframe = ! waterMesh.material.wireframe;
            // 		waterMesh.material.needsUpdate = true;

            // 	}

            // } , false );

            window.addEventListener('resize', onWindowResize, false);

            // var gui = new dat.GUI();

            var effectController = {
                mouseSize: 20.0,
                //20.0,
                viscosity: .03 //0.03
            };

            var valuesChanger = function() {

                heightmapVariable.material.uniforms.mouseSize.value = effectController.mouseSize;
                heightmapVariable.material.uniforms.viscosityConstant.value = effectController.viscosity;

            };

            // gui.add( effectController, "mouseSize", 1.0, 100.0, 1.0 ).onChange( valuesChanger );
            // gui.add( effectController, "viscosity", 0.0, 0.1, 0.001 ).onChange( valuesChanger );
            // var buttonSmooth = {
            // smoothWater: function() {
            // smoothWater();
            // }
            // };
            // gui.add( buttonSmooth, 'smoothWater' );

            initWater();

            valuesChanger();

        }

        function initWater() {

            var materialColor = 0x000000;
            //0x0040C0;

            var geometry = new THREE.PlaneBufferGeometry(BOUNDS,BOUNDS,WIDTH - 1,WIDTH - 1);

            // material: make a ShaderMaterial clone of MeshPhongMaterial, with customized vertex shader
            var material = new THREE.ShaderMaterial({
                uniforms: THREE.UniformsUtils.merge([THREE.ShaderLib['phong'].uniforms, {
                    heightmap: {
                        value: null
                    }
                }]),
                vertexShader: document.getElementById('waterVertexShader').textContent,
                fragmentShader: THREE.ShaderChunk['meshphong_frag']

            });

            material.lights = true;

            // Material attributes from MeshPhongMaterial
            material.color = new THREE.Color(materialColor);
            material.specular = new THREE.Color(0x0d0d0d);
            material.shininess = 35;

            // Sets the uniforms with the material values
            material.uniforms.diffuse.value = material.color;
            material.uniforms.specular.value = material.specular;
            material.uniforms.shininess.value = Math.max(material.shininess, 1e-4);
            material.uniforms.opacity.value = material.opacity;

            // Defines
            material.defines.WIDTH = WIDTH.toFixed(1);
            material.defines.BOUNDS = BOUNDS.toFixed(1);

            waterUniforms = material.uniforms;

            waterMesh = new THREE.Mesh(geometry,material);
            waterMesh.rotation.x = -Math.PI / 2;
            waterMesh.matrixAutoUpdate = false;
            waterMesh.updateMatrix();

            scene.add(waterMesh);

            // Mesh just for mouse raycasting
            var geometryRay = new THREE.PlaneBufferGeometry(BOUNDS,BOUNDS,1,1);
            meshRay = new THREE.Mesh(geometryRay,new THREE.MeshBasicMaterial({
                color: 0xFFFFFF,
                visible: false
            }));
            meshRay.rotation.x = -Math.PI / 2;
            meshRay.matrixAutoUpdate = false;
            meshRay.updateMatrix();
            scene.add(meshRay);

            // Creates the gpu computation class and sets it up

            gpuCompute = new GPUComputationRenderer(WIDTH,WIDTH,renderer);

            var heightmap0 = gpuCompute.createTexture();

            fillTexture(heightmap0);

            heightmapVariable = gpuCompute.addVariable("heightmap", document.getElementById('heightmapFragmentShader').textContent, heightmap0);

            gpuCompute.setVariableDependencies(heightmapVariable, [heightmapVariable]);

            heightmapVariable.material.uniforms.mousePos = {
                value: new THREE.Vector2(WIDTH,WIDTH)
            };
            heightmapVariable.material.uniforms.mouseSize = {
                value: 20.0
            };
            heightmapVariable.material.uniforms.viscosityConstant = {
                value: 0.03
            };
            heightmapVariable.material.defines.BOUNDS = BOUNDS.toFixed(1);

            var error = gpuCompute.init();
            if (error !== null) {
                console.error(error);
            }

            // Create compute shader to smooth the water surface and velocity
            smoothShader = gpuCompute.createShaderMaterial(document.getElementById('smoothFragmentShader').textContent, {
                texture: {
                    value: null
                }
            });

        }

        function fillTexture(texture) {

            var waterMaxHeight = 1;
            // was 10, current: 1

            function noise(x, y, z) {
                var multR = waterMaxHeight;
                var mult = 0.025;
                var r = 0;
                for (var i = 0; i < 15; i++) {
                    r += multR * simplex.noise3d(x * mult, y * mult, z * mult);
                    multR *= 0.53 + 0.025 * i;
                    mult *= 1.25;
                }
                return r;
            }

            var pixels = texture.image.data;

            var p = 0;
            for (var j = 0; j < WIDTH; j++) {
                for (var i = 0; i < WIDTH; i++) {

                    var x = i * 128 / WIDTH;
                    var y = j * 128 / WIDTH;

                    pixels[p + 0] = noise(x, y, 123.4);
                    pixels[p + 1] = 0;
                    pixels[p + 2] = 0;
                    pixels[p + 3] = 1;

                    p += 4;
                }
            }

        }

        function smoothWater() {

            var currentRenderTarget = gpuCompute.getCurrentRenderTarget(heightmapVariable);
            var alternateRenderTarget = gpuCompute.getAlternateRenderTarget(heightmapVariable);

            for (var i = 0; i < 10; i++) {

                smoothShader.uniforms.texture.value = currentRenderTarget.texture;
                gpuCompute.doRenderTarget(smoothShader, alternateRenderTarget);

                smoothShader.uniforms.texture.value = alternateRenderTarget.texture;
                gpuCompute.doRenderTarget(smoothShader, currentRenderTarget);

            }

        }

        var tanFOV = Math.tan(((Math.PI / 180) * camera.fov / 2));
        // var windowHeight = window.innerHeight;

        function onWindowResize() {

            // console.log('oi');
            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;

            camera.fov = (360 / Math.PI) * Math.atan(tanFOV * (window.innerHeight / windowHeight));

            camera.updateProjectionMatrix();
            camera.lookAt(scene.position);

            renderer.setSize(window.innerWidth, window.innerHeight);

            // init();
            // animate();

        }

        function setMouseCoords(x, y) {

            mouseCoords.set((x / renderer.domElement.clientWidth) * 2 - 1, -(y / renderer.domElement.clientHeight) * 2 + 1);
            mouseMoved = true;

        }

        function onDocumentMouseMove(event) {

            setMouseCoords(event.clientX, event.clientY);

        }

        function onDocumentTouchStart(event) {

            if (event.touches.length === 1) {

                // event.preventDefault();

                setMouseCoords(event.touches[0].pageX, event.touches[0].pageY);

            }

        }

        function onDocumentTouchMove(event) {

            if (event.touches.length === 1) {

                // event.preventDefault();

                setMouseCoords(event.touches[0].pageX, event.touches[0].pageY);

            }

        }

        function animate() {

            requestAnimationFrame(animate);

            render();
            // waterMesh.rotation.x = - Math.PI / 2;
            // stats.update();

        }

        function render() {

            // waterMesh.rotation.x = - Math.PI / 2;

            // Set uniforms: mouse interaction
            var uniforms = heightmapVariable.material.uniforms;
            if (mouseMoved) {

                this.raycaster.setFromCamera(mouseCoords, camera);

                var intersects = this.raycaster.intersectObject(meshRay);

                if (intersects.length > 0) {
                    var point = intersects[0].point;
                    uniforms.mousePos.value.set(point.x, point.z);

                } else {
                    uniforms.mousePos.value.set(10000, 10000);
                }

                mouseMoved = false;
            } else {
                uniforms.mousePos.value.set(10000, 10000);
            }

            // Do the gpu computation
            gpuCompute.compute();

            // Get compute output in custom uniform
            waterUniforms.heightmap.value = gpuCompute.getCurrentRenderTarget(heightmapVariable).texture;

            // Render
            renderer.render(scene, camera);

        }
    </script>
    <script>
        $(document).ready(function() {
            // console.log("areuthere");
            $(".animsition-overlay").animsition({
                inClass: 'overlay-slide-in-left',
                outClass: 'overlay-slide-out-left',
                inDuration: 1000,
                // saida
                outDuration: 1000,
                // entrada
                linkElement: '.animsition-link',
                // e.g. linkElement: 'a:not([target="_blank"]):not([href^="#"])'
                loading: true,
                loadingParentElement: 'body',
                //animsition wrapper element
                loadingClass: 'la-square-spin',
                loadingInner: '',
                // e.g '<img src="loading.svg" />'
                timeout: false,
                timeoutCountdown: 5000,
                onLoadEvent: true,
                browser: ['animation-duration', '-webkit-animation-duration'],
                // "browser" option allows you to disable the "animsition" in case the css property in the array is not supported by your browser.
                // The default setting is to disable the "animsition" in a browser that does not support "animation-duration".
                overlay: true,
                overlayClass: 'animsition-overlay-slide',
                overlayParentElement: 'body',
                transition: function(url) {
                    window.location.href = url;
                }
            });
        });

        // var vidClubbed = document.getElementById("vid-clubbed");
        // var vidClubbed = document.getElementById("menu-white");

        //      vidClubbed.addEventListener("mozfullscreenchange",function(){
        //      	// if (document.mozFullScreen) {

        //      	// 	console.log('full');
        //      	// } else {
        //      	// 	console.log('not');
        //      	// }

        //      	if (
        // 	document.fullscreenElement ||
        // 	document.webkitFullscreenElement ||
        // 	document.mozFullScreenElement ||
        // 	document.msFullscreenElement
        // ) {
        //  // console.log('full');
        // 	document.getElementById("menu-white").style.opacity = 0;
        // } else {
        // 	document.getElementById("menu-white").style.opacity = 0;
        // 	// console.log('not');
        // }

        //     // console.log(document.mozFullScreen);
        // }, false);

        // vidClubbed.addEventListener("webkitfullscreenchange",function(){

        //     	if (
        // 		document.fullscreenElement ||
        // 		document.webkitFullscreenElement ||
        // 		document.mozFullScreenElement ||
        // 		document.msFullscreenElement
        // 	) {
        //     			document.getElementById("menu-white").style.zIndex = "0";
        // 	 // console.log('full');
        // 	} else {
        // 		document.getElementById("menu-white").style.zIndex = "3";
        // 		// console.log('not');
        // 	}
        // }, false);

        // vidClubbed.bind('webkitfullscreenchange mozfullscreenchange fullscreenchange', function(e) {
        //     var state = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen;
        //     var event = state ? document.getElementById("menu-white").style.opacity = 0 : document.getElementById("menu-white").style.opacity = 1;

        // });

        jQuery('.post').addClass("hide-post").viewportChecker({
            classToAdd: 'animated fadeInUp',
            offset: 220
        });

        jQuery('.post-txt').addClass("hide-post").viewportChecker({
            classToAdd: 'animated fadeInOnly',
            offset: 220
        });
    </script>
</body>
